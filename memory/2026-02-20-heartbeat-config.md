# 🔧 OpenClaw 定时任务配置指南

## 📋 发现：OpenClaw 有两种定时任务机制

### 1. Heartbeat (心跳) - HEARTBEAT.md

**工作原理**:
- 系统定期轮询（约30分钟一次）
- 读取 `HEARTBEAT.md` 中的任务列表
- 在主会话中执行

**适用场景**:
- 批量检查多个任务
- 需要会话上下文
- 时间可以有一定偏差
- 减少API调用

**配置方式**:
```markdown
# HEARTBEAT.md

## 每次心跳检查
- [ ] 检查邮件
- [ ] 检查日历
- [ ] 检查项目状态
```

**优点**:
- 简单易用
- 可以批量执行
- 有会话上下文

---

### 2. Cron (定时任务) - cron/jobs.json

**工作原理**:
- 精确时间触发
- 独立于主会话
- 可以使用不同模型

**适用场景**:
- 需要精确时间 ("每天9:00")
- 独立任务
- 一次性提醒 ("20分钟后提醒我")

**配置方式**:
```json
{
  "version": 1,
  "jobs": [
    {
      "id": "daily-report",
      "name": "每日报告",
      "schedule": "0 9 * * *",
      "action": "generate-report",
      "enabled": true
    }
  ]
}
```

---

## ✅ 已修复

1. **HEARTBEAT.md** - 已添加状态汇报任务
2. **cron/jobs.json** - 已添加10分钟定时任务

---

## 📝 使用建议

**使用 Heartbeat 当**:
- 多个检查可以合并
- 时间可以稍微漂移
- 需要对话上下文

**使用 Cron 当**:
- 需要精确时间
- 任务需要隔离
- 独立交付到频道

---

## 🔄 心跳状态跟踪

建议创建 `memory/heartbeat-state.json`:

```json
{
  "lastChecks": {
    "project": 1703275200,
    "flutter": 1703260800,
    "report": null
  }
}
```

---

**配置完成时间**: 2026-02-20 14:25
**下次心跳**: 系统自动触发 (约30分钟)
